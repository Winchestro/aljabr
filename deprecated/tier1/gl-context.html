<link rel="import" href="GLRendertarget.html">
<link rel="import" href="GLContext.html">

<script>(function STATIC(){
	"use strict";
	const GL 			= WebGLRenderingContext.prototype;
	const NS 			= Symbol.for("GLElements");
	const GLOBAL 		= window[NS];
	const PROTOTYPE 	= GLOBAL.Interface.GLRendertarget;
	const GLProgram 	= GLOBAL.Class.GLProgram;
	const GLContext 	= GLOBAL.Class.GLContext;

	const LIFECYCLE = {
		created:function(){
			if(this.canvas) this.canvasChanged(null,this.canvas);
			else this.canvas = document.createElement("canvas");
		},
		canvasChanged:function(o,n){
			var c = document.querySelector(n);
			this.context = new GLContext(c,this.quality,this.options);
		},
		qualityChanged:function(o,n){
			this.context.quality = this.quality;
		},
		optionsChanged:function(o,n){
			this.context.options = this.options;
			this.context.updateContext();
		}
	};
	const ATTRIBUTES = {
		quality:2,
		options:{
			alpha:true,
			depth:true,
			stencil:false,
			antialias:false,
			premultipliedAlpha:false,
			preserveDrawingBuffer:false
		}
	};
	const ACCESSORS = {
		createProgram:{
			get:function(){
				return this.context.createProgram.bind(this.context);
			}
		}
	}

	new GLOBAL.Element(PROTOTYPE,"gl-context")
		.copy(ATTRIBUTES,"attributes")
		.define(ACCESSORS,"accessors")
		.copy(LIFECYCLE,"lifecycle")
	;
})();
/* 
	
*/</script>
